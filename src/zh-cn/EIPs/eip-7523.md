---
eip: 7523
title: 空账户弃用
description: 禁止在合并后的网络上存在空账户
author: Peter Davies (@petertdavies)
discussions-to: https://ethereum-magicians.org/t/eip-7523-empty-accounts-deprecation/15870
status: 最后呼叫
last-call-deadline: 2024-03-26
type: 标准跟踪
category: 核心
created: 2023-09-19
requires: 161
---

## 摘要

本 EIP 禁止任何合并后的网络状态中包含空账户。由于在测试套件之外不存在空账户，并且无法创建新的空账户，因此这一要求在实践中已经实现。明确的禁令减少了未来的技术债务。

## 动机

空账户的存在是以太坊早期历史的一个历史遗留物。唯一能够包含空账户的网络是以太坊主网、已弃用的测试网 Ropsten、以太坊经典主网以及各种以太坊经典测试网。主网上所有剩余的空账户在区块 `14049881`（交易 `0xf955834bfa097458a9cf6b719705a443d32e7f43f20b9b0294098c205b4bcc3d`）中被清除，类似的交易也在以太坊经典上发送。其他众多 EVM 兼容网络都不够老，不会有空账户，并且在生产环境中遇到空账户的现实前景也不大。

尽管空账户不再存在，但它们仍然带来了技术债务的遗留问题。[EIP-161](./eip-161.md) 强加了复杂的规则，要求客户端在“触碰”空账户时将其删除。随着以太坊规范的不断演变，“触碰”规则的新边缘案例不断出现，必须进行辩论、实施、测试和文档编写。如果未来的客户端希望仅支持合并后的区块，则必须实现不必要的空账户支持，仅仅是为了通过测试套件。

通过禁止在合并后的网络上存在空账户，本 EIP 使以太坊及相关区块链的设计者和实施者免于今后考虑空账户的负担。

## 规范

本文档中的关键字 "MUST"、"MUST NOT"、"REQUIRED"、"SHALL"、"SHALL NOT"、"SHOULD"、"SHOULD NOT"、"RECOMMENDED"、"NOT RECOMMENDED"、"MAY" 和 "OPTIONAL" 应按 RFC 2119 和 RFC 8174 中的描述进行解释。

空账户是指 **没有代码**、**零 nonce** 和 **零余额** 的账户。这与 [EIP-161](./eip-161.md) 中的定义相同。

在经历合并过渡的网络中，合并区块的前状态不得包含任何空账户。对于在创世时合并的网络，创世账户中不得有空账户。

客户端可以假设以下链没有合并后的空账户，而无需对状态进行扫描：

1. 合并区块哈希为 `0x56a9bb0302da44b8c0b3df540781424684c3af04d0b7a38d72842b762076a664` 的主网链。

2. 满足以下所有条件的任何链：

    - 创世中没有空账户。

    - 在创世时经历了后 Spurious Dragon 分叉。

在合并后的上下文中，存在空账户的以太坊规范被声明为未定义。涉及合并后空账户的任何测试用例都是无效的。

## 理由

本 EIP 的起草旨在以最简单的方式消除空账户带来的长期技术债务。合并被选为一个自然且易于识别的截止点。

替代方法包括：

- 使用更早的截止点，例如区块 `14049881`。

- 确定一系列从未发生的边缘案例行为。

这些方法被拒绝，因为它们不必要地复杂。

## 向后兼容性

由于本 EIP 不改变测试套件外可能发生的任何行为，因此没有向后兼容性影响。

## 安全考虑

本 EIP 的有效性依赖于所有以太坊主网上的空账户在合并之前已被清除的断言。这应当经过适当的验证。

任何人为创建的空账户网络将导致工具和客户端出现问题。

## 版权

版权及相关权利通过 [CC0](../LICENSE.md) 放弃。