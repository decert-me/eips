---
eip: 7668
title: 移除布隆过滤器
description: 从执行区块中移除布隆过滤器
author: Vitalik Buterin (@vbuterin)
discussions-to: https://ethereum-magicians.org/t/eip-7653-remove-bloom-filters/19447
status: 草案
type: 标准跟踪
category: 核心
created: 2024-03-31
---

## 摘要

要求执行区块中的布隆过滤器，包括顶层和收据对象，必须为空。

## 动机

日志最初是为了给应用程序提供一种记录链上事件信息的方式，去中心化应用程序（dapps）能够轻松查询。使用布隆过滤器，dapps 能够快速浏览历史，识别出与其应用程序相关的少数几个包含日志的区块，然后快速识别出哪些单个交易包含它们所需的日志。

实际上，这种机制速度太慢。几乎所有访问历史的 dapps 最终都不是通过对以太坊节点（即使是远程托管的节点）的 RPC 调用来实现的，而是通过集中式的额外协议服务。

本 EIP 提议承认这一现实，并从协议中移除布隆过滤器。需要历史查询的应用程序将被鼓励开发和使用去中心化协议，使用例如 ZK-SNARKs 和增量可验证计算创建可证明的日志索引。

## 规范

执行区块的日志布隆现在要求为空（即 0 字节长）。交易收据的日志布隆现在要求为空（即 0 字节长）。

## 理由

这是一个最小干扰的方式来移除客户端处理布隆的需求。未来的 EIP 可以通过完全移除该字段以及其他已弃用的字段来进一步清理。

LOG 的 gas 成本没有降低，因为虽然不再需要考虑污染布隆过滤器的外部性，但由于 ZK-SNARK EVM 实现的需求，哈希成本已增加。

## 向后兼容性

依赖布隆过滤器读取事件的应用程序将停止工作。今天很少有应用程序依赖此功能，因为在当前的 gas 限制下，假阳性率非常高，并且在长历史查询中处理日志的速度非常慢，尤其是对于轻客户端（该功能主要是为了使其受益）。

## 安全考虑

由于没有引入新功能或降低成本，因此没有提出安全问题。

## 版权

通过 [CC0](../LICENSE.md) 放弃版权及相关权利。