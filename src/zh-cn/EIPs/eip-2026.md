---
eip: 2026
title: 状态租金 H - 账户的固定预付款
author: Alexey Akhunov (@AlexeyAkhunov)
discussions-to: https://ethereum-magicians.org/t/eip-2026-fixed-rent-prepayment-for-all-accounts-change-h-from-state-rent-v3-proposal/3273
status: Stagnant
type: Standards Track
category: Core
created: 2019-05-14
---

## 简单总结
创建新账户（包括合约和非合约）需要一次性固定的租金预付款。已存在的账户在第一次修改时也需要相同的预付款。租金预付款的行为会导致账户中添加一个额外字段，称为 `rentbalance`。该字段成为状态的一部分。

## 摘要
这是状态租金路线图的一部分。此特定更改引入了由于向状态添加新账户而产生的固定费用。从理论上讲，它对可以创建的账户数量设定了界限，因为该固定费用无法通过挖矿回收。

## 动机
罚款由交易发送者承担。与其提高账户创建的 gas 成本（这将使费用直接转向矿工），不如将预付款引导到账户的特殊字段 `rentbalance`。它解决了简单提高 gas 成本的几个缺点：
1. 预付款无法通过挖矿回收，这对状态中的账户数量设定了理论界限（尽管不太可能达到）。
2. 矿工无法规避罚款或将这种规避扩展到其他用户（例如，通过私人费用返还）。
3. 此预付款将用于未来的状态租金，并将允许新创建的合约在同一块中不被驱逐，即使其初始资金为 0。
4. 允许在自毁时退款 `rentbalance` - 当合约自毁时，`balance` 和 `rentbalance` 都会被退还。
5. 对于已存在账户的预付款是必要的，以防止在此更改之前囤积账户。

## 规范
在区块 `H` 及之后，每个新创建的账户都会获得一个新的字段 `rentbalance`，其类型为无符号 256 位整数。
在区块 `H` 及之后，任何导致创建新账户的操作都会从 `tx.origin` 中扣除金额 `ACCOUNT_PREPAYMENT`。该金额将添加到新创建账户的 `rentbalance` 字段中。
在区块 `H` 及之后，任何修改尚未具有 `rentbalance` 字段的账户的操作都会从 `tx.origin` 中扣除金额 `ACCOUNT_PREPAYMENT`。该金额将添加到被修改账户的 `rentbalance` 字段中。这是一项反囤积措施。

导致创建新账户的操作：
1. 通过向没有关联账户的地址发送非零 ETH 创建非合约账户
2. 通过区块创建非合约账户，`coinbase` 指向没有关联账户的地址
3. 通过 `SELFDESTRUCT` 创建非合约账户，参数为没有关联账户的地址
4. 通过没有目标但有数据的交易创建合约。这可能导致将非合约账户转换为合约账户，或创建合约账户。
5. 通过执行 `CREATE` 或 `CREATE2` 创建合约。这可能导致将非合约账户转换为合约账户，或创建合约账户。

在引入预付款后，从 `tx.origin` 中扣除以太的原因可能有两个：购买和消耗 gas，以及为预付款消耗 gas。交易的 gaslimit 目前充当安全限制，其中 `gaslimit` * `gasprice` 表示发送者（`tx.origin`）授权交易从其账户中扣除的最大 wei 数量。
在引入预付款后，`gaslimit` * `gasprice` 仍将表示最大支出 wei 数量，但将用于 gas 购买和预付款，视需要而定。

## 理由
在租金预付款之前，考虑了其他替代方案：
1. 简单提高 gas 成本 - 在动机部分讨论。
1. 在 [状态租金提案的第一个版本](https://github.com/ledgerwatch/eth_state/blob/master/State_rent.pdf) 中，没有关于账户创建的额外征费的概念。这造成了一个轻微的可用性问题，即新创建的合约如果初始资金为 0，将在同一块中被驱逐（当租金引入时）。这推迟了状态租金计划的好处，直到实际引入租金（在第二次或第三次硬分叉中）。
2. 在 [状态租金提案的第二个版本](https://github.com/ledgerwatch/eth_state/blob/master/State_Rent_2.pdf) 中，存在锁定的概念。它与租金预付款非常相似，不同之处在于锁定不会覆盖未来的租金支付。

限制预付款的另一种替代方法（而不是使用 `gaslimit` * `gasprice` 作为限制）是向交易中引入一个新的专用字段 `prepaymentlimit`。该字段仅限制预付款。这种方法将需要更改交易格式，以及更改交易发送者的用户界面，并在交易执行期间有两个计数器 - 一个用于 gas，另一个用于预付款。

## 向后兼容性
此更改不向后兼容，需要激活硬分叉。
由于创建新账户需要分配更多的 gas，这可能对现有合约产生一些不利影响。这些不利影响需要更详细的分析。

## 测试用例
测试用例将根据参考实现生成。

## 实现
将进行概念验证实现，以完善和澄清规范。

## 版权
版权及相关权利通过 [CC0](../LICENSE.md) 放弃。