---
eip: 1872
title: 以太坊网络升级窗口
author: Danno Ferrin (@shemnon)
discussions-to: https://ethereum-magicians.org/t/eip-1872-ethereum-network-upgrade-windows/2993
status: Stagnant
type: Meta
created: 2018-03-25
---

## 简单总结

一个提案，旨在定义每年有限数量的时间窗口，在这些窗口内应进行网络升级（即硬分叉）。还描述了在这些窗口之外安排网络升级的政策。

## 摘要

目标是在一年中大致均匀分布的四个不同周进行网络升级。常规网络升级应在其流程早期宣布其在特定窗口内启动的意图，并选择在该窗口前四到六周的区块号。如果网络升级被取消，则应重新安排到下一个窗口。并非所有窗口都会被使用。优先升级可以在任何月份的第三周安排，但不鼓励这样使用。关键升级根据需要安排。

## 动机

本 EIP 的目的是为以太坊网络升级/硬分叉过程提供一定程度的规律性和可预测性。这将使服务提供商，如交易所和节点运营商，能够在可预测的框架内安排活动。这也为网络升级的交付提供了一个规范化的框架。

## 规范

为三类网络升级定义了调度。第一类是`Roadmap`网络升级，包括故意的协议改进。接下来是`Priority`网络更新，其中存在技术原因需要迅速进行协议更改，但这些原因并未对协议或生态系统构成系统性风险。最后，`Critical`网络升级是为了解决对协议或生态系统构成系统性风险的问题。

### Roadmap 网络升级

Roadmap 网络升级是故意和有计划的网络升级，旨在改善协议和生态系统。历史示例包括 Homestead、Byzantium 和 Constantinople。

Roadmap 网络升级应安排在四个窗口中的一个：一月、四月、七月和十月的第三个星期。当启动网络升级或在规划过程的早期，应针对特定窗口。

> **给审阅者的注意事项：** 选择的月份和周数是为了提供初步建议，并且在最终决定之前可以轻松修改。它们在许多第三季度和第四季度的假期之间取得了平衡。

实施者应在升级前两到四周准备好 Roadmap 网络升级的软件。因此，应在网络升级窗口前四到六周选择一个区块号。调度细节，例如此选择是在测试网部署之前还是之后做出的，超出了本 EIP 的范围。

根据 Roadmap 网络升级的发布节奏，某些窗口将不会被使用。例如，如果选择六个月的发布节奏，则相邻的升级窗口不会发生 Roadmap 升级。因此，对于六个月的节奏，如果在四月发生 Roadmap 升级，则七月窗口将不会用于网络升级。

如果计划的 Roadmap 升级需要重新安排，则应强烈考虑将升级重新安排到三个月后的下一个窗口。对于六个月的节奏，这可能导致发布在相邻的发布窗口中。对于三个月的节奏，下一个网络升级将与当前升级合并，或者下一个网络升级将被推迟。

为了与调度的发布窗口兼容，Roadmap 网络升级的节奏应为三个月的倍数。无论是三个月、六个月、九个月还是更长的节奏都超出了本 EIP 的范围。

### Priority 网络升级

Priority 网络升级保留给需要比 Roadmap 网络升级更紧急的升级，但并未对网络或生态系统构成系统性风险。迄今为止，没有 Priority 升级的示例。可能的示例包括需要在多个升级中进行的 Roadmap 升级，或存在现有缓解措施的安全风险，这些风险通过网络升级会得到更好的解决。另一个可能的原因是由于推迟的 Roadmap 升级而解除难度炸弹。

Priority 网络升级最好在未使用的 Roadmap 启动窗口中启动，即一月、四月、七月和十月的第三周。如果必要，它们可以在任何月份的第三周启动，但应优先考虑未使用的 Roadmap 启动窗口。

Priority 网络升级应提前宣布，并选择一个区块，以便主要客户端实施者能够及时发布带有所需区块号的软件。这些发布应在启动窗口前至少一周进行。因此，Priority 启动窗口应提前两到四周选择。

### Critical 网络升级

Critical 网络升级是旨在解决对协议或生态系统构成系统性风险的网络升级。历史示例包括 Dao Fork、Tangerine Whistle 和 Spurious Dragon。

本 EIP 既不提供对这些紧急硬分叉的开发和部署的指导，也不提供限制。这些升级通常在客户端实施者之间就系统性风险的解决方案达成一致后迅速启动。

建议此类升级执行最低限度的更改，以解决导致需要 Critical 网络升级的问题，并将其他更改整合到后续的 Priority 和 Roadmap 网络升级中。

### 网络升级区块号选择

在选择激活区块时，该数字可以用于传达特定网络在以太坊生态系统中的角色。作为价值存储或其他生产级的网络与作为技术演示或明确指定用于测试的网络在稳定性方面有不同的关注点。

迄今为止，所有主网激活区块的末尾都以三个或更多零结尾，包括 Critical 网络升级。Ropsten 和 Kovan 最初以三个零开始，但切换为回文数字。Rinkeby 一直以来都有回文激活区块。Goerli 尚未进行网络升级。

为了继续这一模式，主网部署和生产级网络的网络升级激活区块号应选择一个其十进制表示以三个或更多零结尾的数字。

对于测试网和测试或开发级网络，鼓励网络运营商选择一个在十进制中是回文的区块激活号。

Roadmap 和 Priority 网络升级的区块号应选择，以便预计在启动窗口期间接近周三 12:00 UTC+0 时发生。这应导致实际区块生产在所选周的周一到周五之间发生。

## 理由

定义启动窗口的理由是为运行以太坊基础设施的企业提供一个可预测的升级时间表。知道何时不会发生升级使企业能够在没有外部变化的情况下进行内部升级，提供了一个明确的时间框架。这也为开发人员和 IT 专业人员提供了一个时间表，以便安排休假。
## 向后兼容性

除了特定的启动窗口，之前的网络升级将会遵循这些政策。Homestead、Byzantium 和 Constantinople 将会是路线图网络升级。没有优先网络升级，尽管 Spurious Dragon 是一个不错的候选者。Dao Fork 是对 TheDao 的关键网络升级。Tangerine Whistle 和 Spurious Dragon 是对上海垃圾邮件攻击的关键升级。Constantinople Fix（在参考测试中称为此）是针对 EIP-1283 安全问题的响应。

如果在 Constantinople 之前实施了该政策，那么 2018 年的初始启动可能会在 Ropsten 测试网共识失败后推迟到下一个窗口。EIP-1283 问题可能会导致由于难度炸弹的影响而进行窗口外升级。

<!-- ## 测试用例 -->
<!-- 此 EIP 无相关测试用例 -->

## 实施

该 EIP 中的窗口预计将在伊斯坦布尔网络升级后开始，这是下一个计划的路线图升级。伊斯坦布尔目前定于 2019-10-16 在主网启动，这与该 EIP 中的时间表兼容。

从伊斯坦布尔开始的路线图升级窗口如下：

| 区块目标     | 启动周范围                |
| ------------ | ------------------------ |
| 2019-10-16   | 2019-10-14 至 2019-10-18 |
| 2020-01-15   | 2020-01-13 至 2020-01-17 |
| 2020-04-15   | 2020-04-13 至 2020-04-17 |
| 2020-07-15   | 2020-07-13 至 2020-07-17 |
| 2020-10-21   | 2020-10-19 至 2020-10-23 |
| 2021-01-20   | 2021-01-18 至 2021-01-22 |
| 2021-04-21   | 2021-04-19 至 2021-04-23 |
| 2021-07-21   | 2021-07-19 至 2021-07-23 |
| 2021-10-20   | 2021-10-18 至 2021-10-22 |
| 2022-01-19   | 2022-01-17 至 2022-01-21 |
| 2022-04-20   | 2022-04-18 至 2022-04-22 |
| 2022-07-20   | 2022-07-18 至 2022-07-22 |
| 2022-10-19   | 2022-10-17 至 2022-10-21 |

明年的优先窗口（不包括路线图窗口）如下：

| 区块目标     | 启动周范围                |
| ------------ | ------------------------ |
| 2019-11-20   | 2019-11-18 至 2019-11-22 |
| 2019-12-18   | 2019-12-16 至 2019-12-20 |
| 2020-02-19   | 2020-02-17 至 2020-02-21 |
| 2020-03-18   | 2020-03-16 至 2020-03-20 |
| 2020-05-20   | 2020-05-18 至 2020-05-22 |
| 2020-06-17   | 2020-06-15 至 2020-06-19 |
| 2020-08-19   | 2020-08-18 至 2020-08-21 |
| 2020-09-16   | 2020-09-14 至 2020-09-18 |
| 2020-11-18   | 2020-11-16 至 2020-11-20 |
| 2020-12-16   | 2020-12-14 至 2020-12-18 |

## 版权

版权及相关权利通过 [CC0](../LICENSE.md) 放弃。