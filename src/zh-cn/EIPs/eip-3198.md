---
eip: 3198
title: BASEFEE 操作码
author: Abdelhamid Bakhta (@abdelhamidbakhta), Vitalik Buterin (@vbuterin)
discussions-to: https://ethereum-magicians.org/t/eip-3198-basefeeopcode/5162
status: Final
type: Standards Track
category: Core
created: 2021-01-13
requires: 1559
---

## 简单总结
添加一个操作码，使 EVM 可以访问区块的基础费用。

## 摘要

添加一个 `BASEFEE (0x48)`，返回当前执行区块的基础费用值。

## 动机
预期的用例是让合约获取基础费用的值。此功能将启用或改善现有用例，例如：
- 需要为任何人通过交易“戳”他们设置赏金的合约，可以将赏金设置为 `BASEFEE + x`，或 `BASEFEE * (1 + x)`。这使得机制更加可靠，因为无论市场条件如何，他们总是会支付“足够”的费用。
- 可以基于此实现 gas 期货。这将比 gas 代币更精确。
- 提高状态通道、Plasma、Optirolls 和其他基于欺诈证明的解决方案的安全性。如果你看到 `BASEFEE` 很高，使用 `BASEFEE` 作为输入可以自动延长挑战期。

## 规范
在 `(0x48)` 添加一个 `BASEFEE` 操作码，气体成本为 `G_base`。

|  操作  | 输入  | 输出  | 成本  |
|:----:  |:-----:|:------:|:----: |
| 0x48   |   0   |    1   |   2   |

## 理由

### 气体成本
处理交易需要基础费用的值。这意味着在运行 EVM 代码之前，其值已经可用。
该操作码不会增加额外的复杂性和额外的读/写操作，因此选择 `G_base` 作为气体成本。

## 向后兼容性
此操作码没有已知的向后兼容性问题。

## 测试用例

### 标称案例
假设当前区块基础费用为 `7 wei`。
这应该将值 `7`（左填充的 byte32）推送到栈中。

字节码：`0x4800` (`BASEFEE, STOP`)

|  Pc   |      操作     | 成本 |   栈   |   R 栈  |
|-------|---------------|------|--------|--------|
|    0  |    BASEFEE    |    2 |        [] |        [] |
|    1  |    STOP       |    0 |       [7] |        [] |

输出: 0x
消耗的气体: `2`

## 安全考虑
基础费用的值不是敏感信息，并且在区块头中是公开可访问的。此操作码没有已知的安全隐患。

## 版权
版权及相关权利通过 [CC0](../LICENSE.md) 放弃。