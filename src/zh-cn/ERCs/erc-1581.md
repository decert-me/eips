---
eip: 1581
title: 非钱包使用从 BIP-32 树派生的密钥
description: 一种 BIP32 树的派生路径结构，用于生成不用于持有加密资产的密钥对。
author: Michele Balistreri (@bitgamma)
discussions-to: https://ethereum-magicians.org/t/non-wallet-usage-of-keys-derived-from-bip-32-trees/1817
status: Stagnant
type: Standards Track
category: ERC
created: 2018-11-13
---
## 摘要
BIP32 定义了一种从公共主密钥派生的层次化密钥树的生成方式。BIP32 和 [BIP44](https://https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki) 定义了这些密钥作为钱包的使用。在本 EIP 中，我们描述了这些密钥在区块链范围之外的使用，定义了一个逻辑树用于密钥使用，可以与现有的 BIP44 兼容钱包共存（因此共享相同的主密钥）。

## 动机
与区块链交互的应用程序通常利用额外的非区块链技术来执行其设计的任务。对于隐私和安全敏感的机制，需要一组密钥。重用用于钱包的密钥可能会被证明是不安全的，而保持完全独立的密钥则使得备份和迁移完整的凭证集变得更加复杂。定义一个与 BIP44 兼容钱包分开的派生分支，可以将独立密钥的安全性与只需备份或迁移一条信息的便利性结合起来。

## 规范

### 路径级别
我们定义 BIP32 路径中的以下级别：

```m / purpose' / coin_type' / subpurpose' / key_type' / key_index```

路径中的撇号表示使用了 BIP32 硬化派生。

该结构遵循 [BIP43](https://github.com/bitcoin/bips/blob/master/bip-0043.mediawiki) 的建议及其 [针对非比特币使用的修正](https://github.com/bitcoin/bips/pull/523/files)。每个级别都有特殊的含义，在下面的章节中描述。

### 目的/币种类型/子目的
这一部分是固定的，设置为 ```m / 43' / 60' / 1581'```, 意味着 BIP 43 -> 以太坊 -> 本 EIP。

所有在此前缀下的子树都是本 EIP 的范围。

### 密钥类型
描述密钥使用的目的。密钥类型应该是通用的。“即时通讯”是一个很好的例子，而“Whisper”则不是。原因在于你希望能够在不同的服务之间使用相同的身份。密钥类型的定义在：待定

在此级别使用硬化派生。

### 密钥索引
密钥索引是一个可变长度的字段，用于标识特定的密钥。在最简单的情况下，它是一个从 0 到 2^31-1 的数字。如果需要更大的标识符（例如表示哈希或 GUID），则必须将值分割到多个 BIP32 嵌套级别中，最重要的位优先并左对齐，如果需要则用 0 填充。所有级别，除了最后一个，必须使用硬化密钥派生。最后一个级别必须使用公钥派生。这意味着每个级别可以携带 31 位的标识符进行表示。

例如，假设我们有一个密钥，其密钥类型为 4'，并且密钥索引表示为十六进制 0x2BCDEFFEDCBAABCD 的 62 位 ID，完整的密钥路径将是 ```m / 43' / 60' / 1581' / 4' / ‭1469833213‬' / ‭1555737549‬ ```. 如果你使用随机标识符，生成一个常规的 GUID 可能会很方便，例如 128 位，只需将每个 32 位字的最高有效位的值固定为 1，除了最后一个将为 0。

## 理由
上述提议的结构遵循 BIP43 通用结构，并且与广泛采用的 BIP44 规范相似。

## 版权
通过 [CC0](../LICENSE.md) 放弃版权及相关权利。